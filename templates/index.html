<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Hashtag Helper</title>
        <link rel="stylesheet" href="static/style.css">
        <script src="static/popup.js"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA3BVGehNIwyoFXC_mYgrOnntTbtMuzp20&libraries=places"></script>
        <!--Make a check that would reject non addresses-->
        <script>
            function initAutocomplete() {
                // Bind autocomplete to location input field
                var locationInput = document.getElementById('location');
                var autocomplete = new google.maps.places.Autocomplete(locationInput);
            }
        </script>
        <script>
            var input = document.getElementById('location');
            var options = {
                types: ['(regions)'],
                componentRestrictions: {country: 'us'}
            };
            var autocomplete = new google.maps.places.Autocomplete(input, options);
        </script>
    </head>
<body onload="initAutocomplete()">
    <h1>HashtagHelper</h1>
    <div class="center">
        <form action="/submit" method="POST" class="form">
            <h2>Location</h2>
            <label for="location">Location</label>
            <input type="text" id="location" name="location" placeholder="Enter your business' address">
            <h2>Industry</h2>
            <label for="industry">Industry</label>
            <input type="text" id="industry" name="industry" placeholder="Enter your business' industry">
            <h2>Business Name</h2>
            <label for="business-name">Business Name</label>
            <input type="text" id="business-name" name="business-name" placeholder="Enter your business' name">
            <h2>Caption</h2>
            <label for="caption">Caption</label>
            <textarea id="caption" name="caption" placeholder="Enter a caption that you would use for your post"></textarea>
            <br><br>

            <input type="submit" value="Submit">
        </form>
    </div>
    <div id="popup"></div>
    <script> 
        let inp = document.getElementById("industry")
        let arr = [
            "Accounting",
            "Airbnb",
            "Art",
            "Architect",
            "Breeding",
            "Book Store",
            "Brewing",
            "Butchering",
            "Car Insurance ",
            "Car Rentals",
            "Car Repairs",
            "Casino",
            "Chiropractor",
            "Church",
            "Civil Engineering",
            "Computer Repairs",
            "Concert",
            "Crop Production",
            "Custom furniture",
            "Data Infrastructure",
            "Dentist",
            "Dining",
            "Discount furniture",
            "Dumpster",
            "Education",
            "Electrical Engineering",
            "Equipment Rentals",
            "Farming",
            "Fashion",
            "Festival",
            "Fishing Guide",
            "Financial Advising",
            "Garden Center",
            "Healthcare",
            "Investor",
            "Leatherworking",
            "Library",
            "Lodging",
            "Masonry",
            "Magazines",
            "Manufacturing",
            "Marketing Agency",
            "Mechanical Engineering",
            "Museum",
            "News",
            "Office Support Services ",
            "Outdoor Services",
            "Painting",
            "Phone Repairs",
            "Plumbing",
            "Printing",
            "Produce",
            "Radio",
            "Recycling ",
            "Realtor",
            "Resort",
            "Roofing",
            "Sanitation",
            "Self storage",
            "Shop Rentals",
            "Sporting Event",
            "Steak House",
            "Supermarket",
            "Taxidermy",
            "Theater",
            "Theme park",
            "Training",
            "Trucking",
            "Tutoring",
            "Warehousing",
            "Welding",
            "YMCA"
        ]

        function autocomplete(inp, arr) {
            
            var currentFocus;
            
            inp.addEventListener("input", function(e) {
                var a, b, i, val = this.value;
                
                closeAllLists();
                if (!val) { return false;}
                currentFocus = -1;
                
                a = document.createElement("DIV");
                a.setAttribute("id", this.id + "autocomplete-list");
                a.setAttribute("class", "autocomplete-items");
                
                this.parentNode.appendChild(a);
                
                for (i = 0; i < arr.length; i++) {
                    
                    if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                    
                    b = document.createElement("DIV");
                    
                    b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                    b.innerHTML += arr[i].substr(val.length);
                    
                    b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                    
                        b.addEventListener("click", function(e) {
                        
                        inp.value = this.getElementsByTagName("input")[0].value;
                        
                        closeAllLists();
                    });
                    a.appendChild(b);
                    }
                }
            });
            
            inp.addEventListener("keydown", function(e) {
                var x = document.getElementById(this.id + "autocomplete-list");
                if (x) x = x.getElementsByTagName("div");
                if (e.keyCode == 40) {
                    
                    currentFocus++;
                    
                    addActive(x);
                } else if (e.keyCode == 38) { 
                    
                    currentFocus--;
                   
                    addActive(x);
                } else if (e.keyCode == 13) {
                    
                    e.preventDefault();
                    if (currentFocus > -1) {
                    
                    if (x) x[currentFocus].click();
                    }
                }
            });
            function addActive(x) {
               
                if (!x) return false;
               
                removeActive(x);
                if (currentFocus >= x.length) currentFocus = 0;
                if (currentFocus < 0) currentFocus = (x.length - 1);
                
                x[currentFocus].classList.add("autocomplete-active");
            }
            function removeActive(x) {
                
                for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
                }
            }
            function closeAllLists(elmnt) {
                
                var x = document.getElementsByClassName("autocomplete-items");
                for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i] && elmnt != inp) {
                x[i].parentNode.removeChild(x[i]);
                }
            }
            }
            
            document.addEventListener("click", function (e) {
                closeAllLists(e.target);
            });
        }
        autocomplete(inp,arr)
    </script>
</body>
</html>